<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Creative - Bootstrap 3 Responsive Admin Template">
  <meta name="author" content="GeeksLabs">
  <meta name="keyword" content="Creative, Dashboard, Admin, Template, Theme, Bootstrap, Responsive, Retina, Minimal">
  <link rel="shortcut icon" href="img/favicon.png">

  <title>Blank | Creative - Bootstrap 3 Responsive Admin Template</title>

  <!-- Bootstrap CSS -->
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <!-- bootstrap theme -->
  <link href="../css/bootstrap-theme.css" rel="stylesheet">
  <!--external css-->
  <!-- font icon -->
  <link href="../css/elegant-icons-style.css" rel="stylesheet" />
  <link href="../css/font-awesome.min.css" rel="stylesheet" />
  <!-- Custom styles -->
  <link href="../css/style.css" rel="stylesheet">
  <link href="../css/style-responsive.css" rel="stylesheet" />

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 -->
  <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
      <script src="js/lte-ie7.js"></script>
    <![endif]-->

    <!-- =======================================================
      Theme Name: NiceAdmin
      Theme URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
      Author: BootstrapMade
      Author URL: https://bootstrapmade.com
    ======================================================= -->
</head>

<body>
  <!-- container section start -->
  <section id="container" class="">
    <!--header start-->

    <header class="header dark-bg">
      <div class="toggle-nav">
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"><i class="icon_menu"></i></div>
      </div>

      <!--logo start-->
      <a href="index.html" class="logo">Sistema <span class="lite">Montessori</span></a>
      <!--logo end-->

      <div class="nav search-row" id="top_menu">
        <!--  search form start -->
        <ul class="nav top-menu">
          <li>
            <form class="navbar-form">
              <input class="form-control" placeholder="Search" type="text">
            </form>
          </li>
        </ul>
        <!--  search form end -->
      </div>

      <div class="top-nav notification-row">
        <!-- notificatoin dropdown start-->

      </div>
    </header>
    <!--header end-->

    <!--sidebar start-->
    <aside>
      <div id="sidebar" class="nav-collapse ">
        <!-- sidebar menu start-->
        <ul class="sidebar-menu">
          <li class="">
            <a class="" href="RegistroEscolarProfesor.html">
                          <i class="icon_house_alt"></i>
                          <span>Registro Escolar</span>
                      </a>
          </li>
          <li class="sub-menu">
            <a href="ComentariosProfesor.html" class="">
                          <i class="icon_document_alt"></i>
                          <span>Comentarios</span>
                      </a>
          </li>
          <li class="sub-menu">
            <a href="CursosProfesor.html" class="">
                          <i class="icon_desktop"></i>
                          <span>Cursos</span>
                      </a>
          </li>
          <li>
            <a class="" href="TemasInteresProfesor.html">
                          <i class="icon_genius"></i>
                          <span>Temas de Interés</span>
                      </a>
          </li>
          <li>
            <a class="" href="InformacionPersonalProfesor.html">
                          <i class="icon_piechart"></i>
                          <span>Inf. Personal</span>
                      </a>
          </li>
          <li class="sub-menu">
            <a onclick="salir()" href="#" class="">
                          <i class="icon_table"></i>
                          <span>Salir</span>
                      </a>
          </li>
        </ul>
        <!-- sidebar menu end-->
      </div>
    </aside>
    <!--sidebar end-->

    <!--main content start-->
    <section id="main-content">
      <section class="wrapper">
        <div class="row">
          <div class="col-lg-12">
            <h3 class="page-header"><i class="fa fa fa-bars"></i> Contenido</h3>
            <ol class="breadcrumb">
              <li><i class="fa fa-home"></i><a href="CursosProfesor.html">Cursos</a></li>
            </ol>
          </div>
        </div>

          <!--tab nav start-->
          <section class="panel">
              <header class="panel-heading tab-bg-primary ">
                <ul class="nav nav-tabs">
                  <li class="nav-item active">
                    <a data-toggle="tab" class="nav-link" href="#Descripcion">Descripción</a>
                  </li>
                  <li class="nav-item">
                    <a data-toggle="tab" class="nav-link" href="#Ejemplo" id="a_ejemplo">Ejemplo</a>
                  </li>
                  <li class="nav-item disabled" id="li_ejercicio">
                    <a  class="nav-link" href="#Ejercicios" id="a_ejercicios">Ejercicios</a>
                  </li>
                  <li class="nav-item disabled" id="li_evaluacion">
                    <a  class="nav-link" href="#Evaluacion" id="a_evaluacion">Evaluación</a>
                  </li>
                </ul>
              </header>
              <div class="panel-body">
                <div class="tab-content">
                  <div id="Descripcion" class="tab-pane active">
                    <div class="container" style="text-align: center;">
                      <h1 id="titulo_curso"></h1>
                    </div>
                    <div id="video_curso" align="center">
                      <!--<iframe width="660" height="415" src="https://www.youtube.com/embed/sAUNzc6QDLE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>-->
                    </div>
                    <div id="imagen_curso" align="center"></div>
                    <div>
                        <h3>Objetivo del curso:</h3>
                        <p id="objetivo_curso"></p>
                    </div>
                    <div id="div_descripcion">
                        <h3>Descripción:</h3>
                        <p id="descripcion_curso"></p>
                    </div>
                  </div>
                  <div id="Ejemplo" class="tab-pane col-md-12">
                    <h3>Instrucciones:</h3>
                    <p>A continuación te mostraremos cómo resolver la sección 3 que pertenece al los ejercicios.</p>
                    <br>
                    <p id="pregunta_ejemplo"></p>




                    <div class="form-group">
                        <div class="row" align="center">
                            <div class="col-md-12">
                                <div id="div_imagen_ejemplo"></div>
                            </div>
                        </div>
                        <label class="control-label ">Respuestas:</label>
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-md-6">
                                  <div class="radio">
                                    <label id="r1_ejemplo">
                                    </label>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="radio">
                                    <label id="r2_ejemplo">
                                    </label>
                                  </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                  <div class="radio">
                                    <label id="r3_ejemplo">
                                    </label>
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="radio">
                                    <label id="r4_ejemplo">
                                    </label>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div><!-- Fin form group -->
                    <h3>Explicación:</h3>
                    <p id="retroalimentacion_ejemplo"></p>
                    <div class="form-group">
                      <div class="row">
                          <div class="col-md-10"></div>
                          <div class="col-md-2">
                              <button type="submit" class="btn btn-primary" onclick="desbloquearEjercicios()">Entendido</button>
                          </div>
                        </div>
                  </div><!-- Fin form group -->
                  </div>
                  <!-- ****************************************************************************************************-->
                  <div id="Ejercicios" class="tab-pane">
                  </div>
                  <!-- ****************************************************************************************************-->
                  <div id="Evaluacion" class="tab-pane">Evaluación</div>
                  <!-- ****************************************************************************************************-->
                </div>
              </div>
            </section>
        <!-- page end-->
      </section>
    </section>
    <!--main content end-->
      <!-- modales -->
      <!-- Modal mensajes -->
        <div class="modal fade" id="exampleModalAiso" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle" id="titulo_modal"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <p id="texto_modal"></p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
    <div class="text-right">
      <div class="credits">
          <!--
            All the links in the footer should remain intact.
            You can delete the links only if you purchased the pro version.
            Licensing information: https://bootstrapmade.com/license/
            Purchase the pro version form: https://bootstrapmade.com/buy/?theme=NiceAdmin
          -->
        </div>
    </div>
  </section>
  <!-- container section end -->
  <!-- javascripts -->
  <script src="../js/jquery.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <!-- nice scroll -->
  <script src="../js/jquery.scrollTo.min.js"></script>
  <script src="../js/jquery.nicescroll.js" type="text/javascript"></script>
  <!--custome script for all page-->
  <script src="../js/scripts.js"></script>
  <script src="../js/gestion_cuenta.js"></script>
    <!-- funciones get -->
    <script src="../js/my_js/get.js"></script>

</body>

</html>

<script>
    var calificacion = 10;
    $( window ).load(function() {
        //alert("epale");
        obtenCurso();
        //$("#a_evaluacion").click();
    });

    function obtenCurso(){
        id_curso=parseInt(vars['curso']);
		if(id_curso){//si el id enviado por get es numerico
			//console.log("Es numerico");
			//alert(usr);
			var dataForm = new FormData();
		  dataForm.append('curso',id_curso);
		  var pagina = "../controller/trae_curso_completo.php";
		  $.ajax({
		    contentType: false,
		    processData: false,
		      // la URL para la petición
		      url : pagina,
		      // la información a enviar
		      // (también es posible utilizar una cadena de datos)
		      data : dataForm,
		      // especifica si será una petición POST o GET
		      type : 'POST',
		      // el tipo de información que se espera de respuesta
		      dataType : 'json',
		      // código a ejecutar si la petición es satisfactoria;
		      // la respuesta es pasada como argumento a la función
		      success : function(json) {
		        //console.log(json);
		        if(json['exito']==true){
                    $("#titulo_curso").text(json['curso']['titulo']);
                    if(json['imagen']){
                        //$("#video_curso").html('<iframe width="660" height="415" src="'+json['video']['url']+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>');
                        //$("#video_curso").html('<h1>aqui va un video... si tuviera uno!</h1>');
                    }else if(json['video']){
                        $("#video_curso").html('<h1>aqui va la imagen</h1>');
                    }else{
                      
                    }
                    $("#objetivo_curso").text(json['curso']['objetivo']);
                    $("#descripcion_curso").text(json['curso']['descripcion']);
                    //ejemplo
                    $("#pregunta_ejemplo").text(json['ejemplo']['pregunta']);
                    //posible imagen
                    if(json['ejemplo']['imagen']){
                        console.log(json['ejemplo']['imagen']['ruta']);
                        $("#div_imagen_ejemplo").html('<img src="../'+json['ejemplo']['imagen']['ruta']+'" style="max-width: 75%"><br>');
                        //$("#div_imagen_ejemplo").html('<img src="../img/bg-1.jpg"class="img-fluid" style="max-width: 75%"><br>');
                        //$("#div_imagen_ejemplo").html('<img src="../img/avatar1.jpg" class="img-fluid" style="max-width: 50%"><br>');
                    }
                    //respuestas
                    for(var i = 0; i<4; i++){
                        var v1 = json['ejemplo']['respuestas'][i]['estatus'];
                        var input1 = '<input type="radio" name="optionsRadios" id="radio_ejemplo'+(i+1)+'" value="'+v1+'" onclick="RespuestaEjemplo(this)" checked>'+json['ejemplo']['respuestas'][i]['texto_respuesta'];

                        var input = '<input type="radio" name="optionsRadios" id="radio_ejemplo'+(i+1)+'" value="'+v1+'" onclick="RespuestaEjemplo(this)">'+json['ejemplo']['respuestas'][i]['texto_respuesta'];
                        var id_label = "#r"+(i+1)+"_ejemplo";

                        if(i==0){
                            $(id_label).html(input1);
                            //console.log(input1);
                        }else{
                            $(id_label).html(input);
                            //console.log(input);
                        }
                    }//fin del for*/
                    $("#retroalimentacion_ejemplo").text(json['ejemplo']['retroalimentacion']);


                    //llenando los ejercicios
                    $("#Ejercicios").append("<h1>Ejercicios</h1><h4>Bienvenido al área de ejercicios, tal como se te mostró anteriormente, aquí podrás practicar todo lo visto en el curso. No te preocupes si fallas, esta aún no es la evaluación.</h4>");
                    for(i=0;i<5;i++){
                        $("#Ejercicios").append("<p>"+json['ejercicios']['preguntas'][i]['descripcion']+"</p>");//pregunta
                        $("#Ejercicios").append('<div class="form-group">'+
                                                    '<div class="row" align="center">'+
                                                        '<div class="col-md-12">'+
                                                            '<div id="div_imagen_ejemplo">'+
                                                                ((json['ejercicios']['imagenes'])?'<img src="../'+json['ejercicios']['imagenes'][i]['ruta']+'" style="max-width: 75%"><br>':"")+
                                                            '</div>'+
                                                        '</div>'+
                                                    '</div>'+
                                                    '<label class="control-label ">Respuestas:</label>'+
                                                    '<div class="col-lg-12">'+
                                                        '<div class="row">'
                                               );
                        //sus respuestas
                        for(var j=0; j<4; j++){
                            var estatus = json['ejercicios']['respuestas'][i][j]['estatus'];
                            var retroalimentacion = json['ejercicios']['respuestas'][i][j]['retroalimentacion'];
                            var input_r1 = '<input type="radio" name="optionsEjercicio'+(i+i)+'" id="'+estatus+'" value="'+retroalimentacion+'" onclick="RespuestaEjercicio(this)">'+json['ejercicios']['respuestas'][i][j]['texto_respuesta'];

                            $("#Ejercicios").append(        '<div class="col-md-6">'+
                                                              '<div class="radio">'+
                                                                '<label id="r'+j+'_ejercicio'+i+'">'+
                                                                    input_r1+
                                                                '</label>'+
                                                              '</div>'+
                                                            '</div>'
                                                    );
                        }//*/
                        $("#Ejercicios").append(        '</div>'+
                                                    '</div>'+
                                                '</div><!-- Fin form group -->'
                                                );


                    }//fin del for principal
                    $("#Ejercicios").append('<div class="form-group">'+
                                              '<div class="row">'+
                                                  '<div class="col-md-10"></div>'+
                                                  '<div class="col-md-2">'+
                                                      '<button type="submit" class="btn btn-primary" onclick="desbloquearEvaluacion()">Terminar Ejercicios</button>'+
                                                  '</div>'+
                                                '</div>'+
                                            '</div>'
                                            );//*/

                    //-----------------------------------------------------------------------------------------------------------------------
                    //area de evaluación
                    $("#Evaluacion").append("<h1>Evaluación</h1><h4>Ahora te encuentras en el area de evaluación, en este panel encontrarás preguntas relacionadas con el tema que aprendiste en este curso. Esta vez no te daremos retroalimentación al seleccionar una pregunta así que da lo mejor de ti.</h4>"
                                    );

                    //llenado de respuestas
                    for(i=0;i<5;i++){
                        $("#Evaluacion").append("<p>"+json['evaluacion']['preguntas'][i]['descripcion']+"</p>");//pregunta
                        $("#Evaluacion").append('<div class="form-group">'+
                                                    '<div class="row" align="center">'+
                                                        '<div class="col-md-12">'+
                                                            '<div id="div_imagen_ejemplo">'+
                                                                ((json['evaluacion']['imagenes'])?'<img src="../'+json['evaluacion']['imagenes'][i]['ruta']+'" style="max-width: 75%"><br>':"")+
                                                            '</div>'+
                                                        '</div>'+
                                                    '</div>'+
                                                    '<label class="control-label ">Respuestas:</label>'+
                                                    '<div class="col-lg-12">'+
                                                        '<div class="row">'
                                               );
                        //sus respuestas
                        for(var j=0; j<4; j++){
                            var estatus = json['evaluacion']['respuestas'][i][j]['estatus'];
                            //var retroalimentacion = json['evaluacion']['respuestas'][i][j]['retroalimentacion'];
                            var input_r1 = '<input type="radio" name="optionsEjercicio'+(i+i)+'" id="'+estatus+'" value="'+estatus+'" onclick="RespuestaEvaluacion(this)">'+json['evaluacion']['respuestas'][i][j]['texto_respuesta'];

                            $("#Evaluacion").append(        '<div class="col-md-6">'+
                                                              '<div class="radio">'+
                                                                '<label id="r'+j+'_ejercicio'+i+'">'+
                                                                    input_r1+
                                                                '</label>'+
                                                              '</div>'+
                                                            '</div>'
                                                    );
                        }//*/
                        $("#Evaluacion").append(        '</div>'+
                                                    '</div>'+
                                                '</div><!-- Fin form group -->'
                                                );
                    }//fin del for principal
                        $("#Evaluacion").append('<div class="form-group">'+
                                                  '<div class="row">'+
                                                      '<div class="col-md-10"></div>'+
                                                      '<div class="col-md-2">'+
                                                          '<button type="submit" class="btn btn-primary" onclick="finalizarEvaluacion()">Terminar Evaluación</button>'+
                                                      '</div>'+
                                                    '</div>'+
                                                '</div>'
                                                );

		        }else{
					//alert("No se ha encontrado datos")
		        }
		      },
		      error : function(xhr, status) {
					alert("Existió un error en el servidor...");
		      },
		      // código a ejecutar sin importar si la petición falló o no
		      complete : function(xhr, status) {
		          //alert("finalizado!");
		      }
		  });//*/
		}else{
			alert("No se ha encontrado datos")
			//location.href ="principal_usuario.html";
		}
	}

    function RespuestaEjemplo(elemento){
        //alert("Se seleccionó el radio: "+numero);
        //console.log(typeof(status));
        //console.log($(elemento).val());
        //console.log(""+status);
    }

    function RespuestaEjercicio(elemento){
        //alert("Se seleccionó el radio: "+numero);
        //console.log(typeof(status));
        console.log($(elemento).val());
        //var retroalimentacion = $(elemento).attr("id");
        //alert($(elemento).val());
        MuestraModal("",$(elemento).val());
        //console.log(id);
        //console.log(""+status);
    }

    function RespuestaEvaluacion(elemento){
        if(calificacion>10){
            calificacion = 10;
        }
        var valor = $(elemento).val();
        //alert("Se seleccionó el radio: "+numero);
        //console.log(typeof(status));
        console.log($(elemento).val());
        //var retroalimentacion = $(elemento).attr("id");
        //alert($(elemento).val());
        if(valor == "incorrecta" && calificacion < 10){
            calificacion = calificacion - 2;
        }else{
            calificacion = calificacion + 2;
        }
        //console.log(id);
        //console.log(""+status);
    }

    function desbloquearEjercicios(){
        $("#a_ejercicios").attr('data-toggle','tab');
        $("#li_ejercicio").removeClass("disabled");
        //alert("¡Ahora puedes continuar con los ejercicios!")
        MuestraModal("ATENCION","¡Ahora puedes continuar con los ejercicios!");
    }
    function desbloquearEvaluacion(){
        $("#a_evaluacion").attr('data-toggle','tab');
        $("#li_evaluacion").removeClass("disabled");
        MuestraModal("ATENCION","¡Ahora puedes continuar con las evaluaciones!");
        //alert("¡Ahora puedes continuar con las evaluaciones!");

    }

    function MuestraModal(titulo,texto){
        $("#titulo_modal").text(titulo);
        $("#texto_modal").text(texto);
        $("#exampleModalAiso").modal();
    }

    function finalizarEvaluacion(){
        if(calificacion>10){
            calificacion = 10;
        }
        id_curso=parseInt(vars['curso']);
        var dataForm = new FormData();
		  dataForm.append('calificacion',calificacion);
			dataForm.append('id_curso',id_curso);
		  var pagina = "../controller/almacenar_evaluacion.php";
		  $.ajax({
		    contentType: false,
		    processData: false,
		      // la URL para la petición
		      url : pagina,
		      // la información a enviar
		      // (también es posible utilizar una cadena de datos)
		      data : dataForm,
		      // especifica si será una petición POST o GET
		      type : 'POST',
		      // el tipo de información que se espera de respuesta
		      dataType : 'json',
		      // código a ejecutar si la petición es satisfactoria;
		      // la respuesta es pasada como argumento a la función
		      success : function(json) {
		        //console.log(json);
		        if(json['exito']==true){
                    //alert("Informacion almacenada con exito.")
                    MuestraModal("ATENCION","Informacion almacenada con exito.");
                    location.href ="CursosProfesor.html";

		        }else{
							alert("Lo sentimos, algo sucedió mal...");
		          //document.getElementById('texto_tabla').innerHTML = json['error'];
		        }
		      },
		      error : function(xhr, status) {
						alert("Existió un error en el servidor...");
		      },
		      // código a ejecutar sin importar si la petición falló o no
		      complete : function(xhr, status) {
		          //alert('Petición realizada');
		      }
		  });//*/
        //alert("Tu calificacion es: "+calificacion);
    }
</script>
